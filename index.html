<!DOCTYPE html>
<html>

<head>
    <!-- Load the Paper.js library -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

</head>
<!--<script>window.onresize = function () {
        document.body.height = window.innerHeight;
    }
    window.onresize(); // called to initially set the height.
</script>-->
<script type="text/javascript" src="js/paper.js"></script>
<!-- Load external PaperScript and associate it with myCanvas -->
<!-- <script type="text/paperscript" src="js/myScript.js" canvas="myCanvas">
-->
<script type="text/javascript" src="js/jsPaper.js"></script>
</script>
<script type="text/javascript" src="js/ui.js"></script>
<script type="text/javascript" src="js/palette.js"></script>
<style>
    /* Scale canvas with resize attribute to full size */
    body {
        overflow: hidden;
        display: grid;
        height: 100vh;
        padding: 0%;
        grid-template: auto 1fr 100px / auto 1fr auto
    }

    .header {
        background: lightpink;
        padding: .15rem;
        grid-column: 2/ 4;
        display: grid;
        grid-template-columns: 1fr auto;
    }

    /*.headerbtns {
        background: red;
    }
    */

    .title {
        align-items: right;
    }

    .left-sidebar {
        background: lightblue;
        grid-column: 1 / 2;
    }

    main {
        background: coral;
        grid-column: 2 / 3;
    }

    .right-sidebar {
        background: yellow;
        grid-column: 3 / 4;
    }

    footer {
        background: wheat;
        padding: 0rem;
        text-align: center;
        grid-column: 1 / 4;
    }

    body {
        font-family: system-ui, sans-serif;
    }

    .left-sidebar,
    .right-sidebar {
        padding: 1rem;
    }

    .button {
        background-color: #4e4e4e;
        /* Green */
        border: none;
        color: white;
        padding: 10px 10px;
        text-align: center;
        text-decoration: none;
        display: block;
        border-radius: 12px;
        font-size: 20px;
    }

    .button-inline {
        background-color: #4e4e4e;
        /* Green */
        border: none;
        color: white;
        padding: 10px 10px;
        text-align: center;
        text-decoration: none;
        display: inline;
        border-radius: 12px;
        font-size: 20px;
    }

    .button:hover {
        color: rgb(247, 140, 140);
    }


    label.btn {
        padding: 1px 1px;
        color: rgb(255, 255, 255);
        display: block
    }

    label.btn input {
        opacity: 0;
        position: absolute;
    }

    label.btn span {
        text-align: center;
        padding: 5px 5px;
        display: block;
    }

    label.btn input:checked+span {
        background-color: rgb(41, 41, 41);
        color: #fff;
    }

    .divider {
        width: 5px;
        height: 8px;
        display: block;
    }

    .datareadout {
        background-color: rgb(174, 174, 211);
        font-size: 8pt;
        display: inline
    }

    .colorslider {
        display: block;
    }
    .selectedColor {
        outline-width: 2px;
        outline-color: black;;
    }
    .drawingCanvas {
        border: "1px solid black";
        
    }
    .palette {
        position: absolute; 
        z-index: 0; 
        border: 1px solid black;
    }
    .paletteOverlay {
        position: absolute; 
        z-index: 1; 
        pointer-events: none;
    }
    #paletteWrapper {
        position: relative;
        width: 200px;
        height: 300px;
        display:block;
        background-color: azure;
    }
    .colorManip {
        display:block;
    }
</style>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no, -webkit-user-drag=no" />

<body>
    <div class="header">
        <div class="headerbtns">
            <input type="button" class="button-inline material-icons" value="file_upload" old_value="moveTop"
                id="order-top">
            <input type="button" class="button-inline material-icons" value="keyboard_arrow_up" old_value="moveup"
                id="order-up">
            <input type="button" class="button-inline material-icons" value="keyboard_arrow_down" old_value="modeDown"
                id="order-down">
            <input type="button" class="button-inline material-icons" value="file_download" old_value="moveBottom"
                id="order-bottom">
            <input type="button" class="button-inline material-icons" value="delete_outline" old_value="Delete"
                id="delete">
            <input type="button" class="button-inline material-icons" value="control_point_duplicate"
                old_value="duplicate" id="duplicate">
            <input type="button" class="button-inline material-icons" value="photo" id="saveButton">
            <input type="button" class="button-inline material-icons" value="upload_file" id="loadButton">
            <input type="button" class="button-inline material-icons" value="download_for_offline" id="export-button">
        </div>
        <h4 class="title">ArtMachine</h4>
    </div>
    <div class="left-sidebar">
        <button class="button material-icons" value="Undo" id="undo-button">undo</button>
        <div class="divider"></div>
        <label class="btn btn-primary"><input type="radio" name="mode" id="polyfill" value="polyfill"><span
                class="material-icons">gesture</span></label>
        <label class="btn btn-primary"><input type="radio" name="mode" id="brush" value="brush"> <span
                class="material-icons">brush</span></label>
        <label class="btn btn-primary"><input type="radio" name="mode" id="picker" value="picker"> <span
                class="material-icons">colorize</span></label>
        <label class="btn btn-primary"><input type="radio" name="mode" id="polygon" value="polygon"> <span
                class="material-icons">timeline</span></label>
        <label class="btn btn-primary"><input type="radio" name="mode" id="bezier" value="bezier"> <span
                class="material-icons">swap_calls</span></label>
        <label class="btn btn-primary"><input type="radio" name="mode" id="line" value="line"> <span
                class="material-icons">horizontal_rule</span></label>
        <label class="btn btn-primary"><input type="radio" name="mode" id="circle" value="circle"> <span
                class="material-icons">add_circle_outline</span></label>
        <label class="btn btn-primary"><input type="radio" name="mode" id="rect" value="rect"> <span
                class="material-icons">crop_din</span></label>
        <label class="btn btn-primary"><input type="radio" name="mode" id="select" value="select"> <span
                class="material-icons">navigation</span></label>

    </div>
    <main>
        <canvas id="myCanvas" class="drawingCanvas" width="600" height="600" resize data-paper-hidpi="off"></canvas>
        <input type="file" id="fileElem" multiple="" accept="image/*" style="display:none">
    <div id="fileList">
        <p>No files selected!</p>
    </div>
    </main>
    <div class="right-sidebar">
        <canvas id="displayColors" class="selectedColor" width="100%" height="50px" ></canvas>
        <div id="paletteWrapper">
            <canvas id="palette" class="palette" width="200" height="300"></canvas> 
            <canvas id="paletteOverlay" class="paletteOverlay" width="200" height=300 ></canvas>
        </div>
        <div class="colorManip">
            <div>
                r<input type="range" class="colorslider" name="rslider" min="0" max="255" id="rslider" class="slider">
                g<input type="range" class="colorslider" name="gslider" min="0" max="255" id="gslider" class="slider">
                b<input type="range" class="colorslider" name="bslider" min="0" max="255" id="bslider" class="slider">
            </div>
            <div>
                h<input type="range" class="colorslider" name="hslider" min="0" max="360" id="hslider" class="slider">
                s<input type="range" class="colorslider" name="sslider" min="0" max="255" id="sslider" class="slider">
                v<input type="range" class="colorslider" name="vslider" min="0" max="255" id="vslider" class="slider">
            </div>
            <div class="sizeContainer">
                <div id="brushSizeIndicator">50</div>
                <input type="range" min="1" max="100" value="50" class="slider" id="brushSize">
            </div>
            <div id="compositeMode"> </div>
        </div>
    </div>
    <footer>
        <input type="checkbox" name="adjustLastColor" id="adjustLastColor"><label for="adjustLastColor">Adjust Last
            Color</label>
            <input type="checkbox" name="strokeFilledPoly" id="strokeFilledPoly"><label for="strokeFilledPoly">Stroke
                Filled Poly</label>
        ArtMachine
        <div class="datareadout" id="datareadout">data</div>
        <div class="datareadout" id="datareadoutcolor">data</div>
        <div class="datareadout" id="pickedColor">data</div>
    </footer>
    </div>
</body>

</html>